(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5219:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var r=n(9008),a=n(4476),i=n.n(a),s=n(1508),c=n(266),o=n(809),u=n.n(o),l=n(7294),d=function(e){return new Promise((function(t,n){var r=new FileReader;r.onerror=function(){return n(r.error)},r.onload=function(){return t(r.result||"")},r.readAsText(e)}))},f=n(2809),h=function(e){var t=function(e){return 60*new Date("1997/01/01 "+e).getHours()+new Date("1997/01/01 "+e).getMinutes()};return e.reduce((function(e,n){var r=n[0],a=n[2],i=n[7]+":"+n[9],s=n[10];e[a]||(e[a]={tasks:[],workTimes:[]}),e[a].tasks.indexOf(i)>=0||e[a].tasks.push(i);var c=function(e,t){return e.map((function(e){return e.name})).indexOf(t)}(e[a].workTimes,r);return c>=0?e[a].workTimes[c][i]=t(s):e[a].workTimes.push((0,f.Z)({name:r},i,t(s))),e}),{})},m=n(5893),x=function(e){var t=e.taskNames,n=e.workerNames,r=e.setSelectedTasks,a=e.setSelectedWorkers;return(0,m.jsxs)("div",{children:[(0,m.jsxs)("select",{name:"wokerName",id:"wokerName",onChange:function(e){return a(e.target.value?[e.target.value]:[])},children:[(0,m.jsx)("option",{value:"",children:"\u5168\u3066"}),n&&n.map((function(e){return(0,m.jsx)("option",{value:e,children:e},e)}))]}),(0,m.jsxs)("select",{name:"taskName",id:"taskName",onChange:function(e){return r(e.target.value?[e.target.value]:[])},children:[(0,m.jsx)("option",{value:"",children:"\u5168\u3066"}),t&&t.map((function(e){return(0,m.jsx)("option",{value:e,children:e},e)}))]})]})},p=function(e){return["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"][e]||"#000000"},_=n(6375),k=n(4195),v=n(3023),j=n(5358),g=n(9307),w=n(8102),b=n(6830),N=function(e){var t=e.chartData,n=e.workerName,r=e.selectedTasks;return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:n}),(0,m.jsxs)(_.v,{width:800,height:400,data:t.workTimes,margin:{top:20,right:0,left:0,bottom:0},children:[(0,m.jsx)(k.q,{strokeDasharray:"3 3"}),(0,m.jsx)(v.K,{dataKey:"name"}),(0,m.jsx)(j.B,{label:{value:"minutes",angle:-90,position:"insideLeft"}}),(0,m.jsx)(g.u,{}),t.tasks.map((function(e,t){if(!(r.length>0&&r.indexOf(e)<0))return(0,m.jsx)(w.$,{dataKey:e,stackId:"a",fill:p(t)},e)})),(0,m.jsx)(b.D,{width:250,height:350,layout:"vertical",verticalAlign:"top",align:"right",wrapperStyle:{overflow:"auto",paddingLeft:"20px"}})]})]},n)},y=function(){var e=(0,l.useState)({}),t=e[0],n=e[1],r=(0,l.useState)([]),a=r[0],i=r[1],o=(0,l.useState)([]),f=o[0],p=o[1],_=(0,l.useState)(!1),k=_[0],v=_[1],j=function(){var e=(0,c.Z)(u().mark((function e(t){var r,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n({}),t){e.next=3;break}return e.abrupt("return");case 3:return v(!0),e.next=6,d(t);case 6:r=e.sent,a=r.split("\r\n").map((function(e){return e.split(",")})),i=h(a.slice(1)),n(i),v(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:k&&"\u8aad\u307f\u8fbc\u307f\u4e2d..."}),(0,m.jsx)("input",{type:"file",accept:"text/csv",onChange:function(e){return j(e.target.files[0])}}),Object.keys(t).length>0&&(0,m.jsx)(x,{workerNames:Object.keys(t).map((function(e){return e})),taskNames:(0,s.Z)(new Set(Object.values(t).flatMap((function(e){return e.tasks})).sort())),setSelectedTasks:p,setSelectedWorkers:i}),(0,m.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:Object.keys(t).map((function(e){if(!(a.length>0&&a.indexOf(e)<0)&&!(f.length>0&&t[e].tasks.filter((function(e){return f.indexOf(e)>=0})).length<1))return(0,m.jsx)(N,{chartData:t[e],workerName:e,selectedTasks:f},e)}))})]})};function H(){return(0,m.jsxs)("div",{className:i().container,children:[(0,m.jsxs)(r.default,{children:[(0,m.jsx)("title",{children:"Jobcan Chart"}),(0,m.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,m.jsx)("div",{className:i().header,children:"Jobcan Chart"}),(0,m.jsx)("main",{className:i().main,children:(0,m.jsx)(y,{})})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5219)}])},4476:function(e){e.exports={container:"Home_container__1EcsU",main:"Home_main__1x8gC",header:"Home_header__3vlZW",footer:"Home_footer__1WdhD",title:"Home_title__3DjR7",description:"Home_description__17Z4F",code:"Home_code__axx2Y",grid:"Home_grid__2Ei2F",card:"Home_card__2SdtB",logo:"Home_logo__1YbrH"}}},function(e){e.O(0,[774,783,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);